<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: CreateUser.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: CreateUser.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>
import React, { useState } from 'react';
import { v4 as uuidv4 } from 'uuid';


/**
 * Componente para crear un nuevo usuario con selección de commodities.
 * @component
 * @param {Object} props - Propiedades del componente.
 * @param {string} props.name - Nombre del usuario.
 * @param {Array} props.commodities - Lista de commodities seleccionadas.
 * @param {function} props.onCreateUser - Función llamada al crear un nuevo usuario.
 */
const CreateUser = ({ onCreateUser }) => {
    /**
     * Estado del formulario.
     * @type {Object}
     * @property {string} name - Nombre del usuario.
     * @property {Array&lt;Object>} commodities - Lista de commodities seleccionadas.
     */
    const [formData, setFormData] = useState({
      name: '',
      commodities: [],
    });
  
    /**
     * Estado de la commodity seleccionada.
     * @type {string}
     */
    const [selectedCommodity, setSelectedCommodity] = useState('');
  
    /**
     * Estado de la cantidad de la commodity.
     * @type {number}
     */
    const [commodityQuantity, setCommodityQuantity] = useState(1);
  
    /**
     * Maneja el cambio en los campos del formulario.
     * @param {Object} e - Evento de cambio.
     */
    const handleInputChange = (e) => {
      const { name, value } = e.target;
      setFormData((prevData) => ({
        ...prevData,
        [name]: name === 'commodities' ? [...prevData.commodities, value] : value,
      }));
    };
  
    /**
     * Maneja la adición de una commodity.
     */
    const handleAddCommodity = () => {
      if (selectedCommodity &amp;&amp; !formData.commodities.includes(selectedCommodity)) {
        setFormData((prevData) => ({
          ...prevData,
          commodities: [
            ...prevData.commodities,
            { name: selectedCommodity, quantity: commodityQuantity },
          ],
        }));
        setSelectedCommodity('');
        setCommodityQuantity(1);
      }
    };
  
    /**
     * Maneja la eliminación de una commodity.
     * @param {string} commodityName - Nombre de la commodity a eliminar.
     */
    const handleRemoveCommodity = (commodityName) => {
      setFormData((prevData) => ({
        ...prevData,
        commodities: prevData.commodities.filter((c) => c.name !== commodityName),
      }));
    };
  
    /**
     * Maneja el envío del formulario.
     * @param {Object} e - Evento de envío.
     */
    const handleSubmit = (e) => {
      e.preventDefault();
      if (validateForm()) {
        const id = uuidv4();
        const newUser = {
          id,
          name: formData.name,
          commodities: formData.commodities,
        };
  
        const existingUsers = JSON.parse(localStorage.getItem('users')) || [];
        const updatedUsers = [...existingUsers, newUser];
  
        localStorage.setItem('users', JSON.stringify(updatedUsers));
        onCreateUser(newUser);
  
        setFormData({
          name: '',
          commodities: [],
        });
      }
    };
  
    /**
     * Valida el formulario antes de enviar.
     * @returns {boolean} - `true` si el formulario es válido, `false` de lo contrario.
     */
    const validateForm = () => {
      return formData.name &amp;&amp; formData.commodities.length > 0;
    };
  return (
    &lt;div>
      &lt;h2>Crear Nuevo Usuario&lt;/h2>
      &lt;form onSubmit={handleSubmit}>
        &lt;label htmlFor="name">Nombre:&lt;/label>
        &lt;input
          type="text"
          id="name"
          name="name"
          value={formData.name}
          onChange={handleInputChange}
          required
        />

        &lt;label>Commodities:&lt;/label>
        &lt;div>
          &lt;select
            value={selectedCommodity}
            onChange={(e) => setSelectedCommodity(e.target.value)}
            
          >
            &lt;option value="">Seleccionar Commodity&lt;/option>
            &lt;option value="WTI"> Oil: West Texas Intermediate (WTI) &lt;/option>
            &lt;option value="BRENT">Oil: Brent (Europe)&lt;/option>
            &lt;option value="NATURAL_GAS">Natural Gas&lt;/option>
            &lt;option value="COPPER">Copper&lt;/option>
            &lt;option value="ALUMINUM">Aluminum&lt;/option>
            &lt;option value="WHEAT">Wheat&lt;/option>
            &lt;option value="CORN">Corn&lt;/option>
            &lt;option value="COTTON">Cotton&lt;/option>
            &lt;option value="SUGAR">Sugar&lt;/option>
            &lt;option value="COFFEE">Coffee&lt;/option>
          &lt;/select>
          &lt;input
            type="number"
            value={commodityQuantity}
            onChange={(e) => setCommodityQuantity(e.target.value)}
            min="1"
          />
          &lt;button type="button" onClick={handleAddCommodity}>
            Agregar Commodity
          &lt;/button>
        &lt;/div>

        &lt;div>
          &lt;h3>Commodities Seleccionadas:&lt;/h3>
          &lt;ul>
            {formData.commodities.map((commodity, index) => (
              &lt;li key={index}>
                {commodity.name} - Cantidad: {commodity.quantity}
                &lt;button
                  type="button"
                  onClick={() => handleRemoveCommodity(commodity.name)}
                >
                  Eliminar
                &lt;/button>
              &lt;/li>
            ))}
          &lt;/ul>
        &lt;/div>

        &lt;button type="submit">Crear Usuario&lt;/button>
      &lt;/form>
    &lt;/div>
  );
};

export default CreateUser;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#CreateUser">CreateUser</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Sat Nov 25 2023 12:14:27 GMT+0100 (hora estándar de Europa central)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
